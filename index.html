<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jogo da Cobrinha</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #af0101; 
    }
    
    canvas {
      background-color: #2dfc2d; 
      display: block;
      margin: 0 auto;
    }

    #score {
      position: absolute;
      top: 50%;
      left: 10px;
      transform: translateY(-50%);
      color: #000000;
      font-size: 24px;
    }

    #gameOverMessage {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      display: none;
      background-color: rgba(0, 0, 0, 0.8);
      padding: 20px;
      border-radius: 10px;
    }

    #gameOverMessage h1 {
      color: #ff0000;
      margin: 0;
      margin-bottom: 10px;
    }

    #gameOverButton {
      background-color: #6d5959;
      color: #000;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }
    /*  colisao */
    @keyframes shake {
  0% { transform: translate(0); }
  10% { transform: translate(-5px, 5px); }
  20% { transform: translate(-5px, -5px); }
  30% { transform: translate(5px, -5px); }
  40% { transform: translate(5px, 5px); }
  50% { transform: translate(-5px, 5px); }
  60% { transform: translate(-5px, -5px); }
  70% { transform: translate(5px, -5px); }
  80% { transform: translate(5px, 5px); }
  90% { transform: translate(-5px, 5px); }
  100% { transform: translate(0); }
}

.shake {
  animation: shake 0.5s;
}

  </style>
</head>
<body>
  <canvas id="snakeCanvas" width="600" height="600"></canvas>

  <div id="score"><strong>Itens coletados: 0</strong></div>
  <div id="gameOverMessage">
    <h1>Game Over</h1>
    <button id="gameOverButton">Recomeçar</button>
  </div>
  
  <script>
    // Configuração inicial
    const canvas = document.getElementById("snakeCanvas");
    const context = canvas.getContext("2d");
    const box = 30;
    const canvasSize = 600;
    const snake = [];
    snake[0] = { x: 10 * box, y: 10 * box };
    let direction = "right";
    let food = {
      x: Math.floor(Math.random() * (canvasSize / box)) * box,
      y: Math.floor(Math.random() * (canvasSize / box)) * box,
    };
    let score = 0;
    let game;

    // Função para desenhar o canvas
    function drawCanvas() {
      context.fillStyle = "   #2dfc2d "; // cor de fundo de onde a cobrinha se mexe
      context.fillRect(0, 0, canvasSize, canvasSize);
    }

    // Função para desenhar a cobra
    function drawSnake() {
      for (let i = 0; i < snake.length; i++) {
        context.fillStyle = i === 0 ? "green" : "#006400";
        context.fillRect(snake[i].x, snake[i].y, box, box);
        context.strokeStyle = "red"; // cor da borda da cobra
        context.strokeRect(snake[i].x, snake[i].y, box, box);
      }
    }

    // Função para desenhar a comida

function drawFood() {
  // Desenhar sombreamento da maçã (mesmo código anterior)

  // Desenhar o corpo da maçã
  context.fillStyle = "red";
  context.beginPath();
  context.arc(food.x + box / 2, food.y + box / 2, box / 2, 0, 2 * Math.PI);
  context.fill();

  // Desenhar brilho da maçã
  context.fillStyle = "rgba(255, 255, 255, 0.4)";
  context.beginPath();
  context.ellipse(
    food.x + box / 2, food.y + box / 2,
    box / 3, box / 5, 0, 0, 2 * Math.PI
  );
  context.fill();

  // Desenhar o "cabinho" da maçã (mesmo código anterior)
}

    // Função para verificar colisões
    function collisionCheck(head, array) {
  for (let i = 0; i < array.length; i++) {
    if (head.x === array[i].x && head.y === array[i].y) {
      document.body.classList.add("shake"); // Aplica a classe .shake ao body
      setTimeout(function() {
        document.body.classList.remove("shake"); // Remove a classe .shake após 0.5 segundos
      }, 500);
      return true;
    }
  }
  return false;
}


    // Função para atualizar o score
    function updateScore() {
      document.getElementById("score").innerHTML = "Itens coletados: " + score;
    }

    // Função para reiniciar o jogo
    function restartGame() {
      snake.length = 1;
      snake[0] = { x: 10 * box, y: 10 * box };
      direction = "right";
      score = 0;
      updateScore();
      draw();
      document.getElementById("gameOverMessage").style.display = "none";
      startGame();
    }

    // Função principal de desenho
    function draw() {
      drawCanvas();
      drawSnake();
      drawFood();
      let snakeX = snake[0].x;
      let snakeY = snake[0].y;
      if (direction === "right") snakeX += box;
      if (direction === "left") snakeX -= box;
      if (direction === "up") snakeY -= box;
      if (direction === "down") snakeY += box;
      let newHead = { x: snakeX, y: snakeY };
      if (
        snakeX < 0 ||
        snakeX >= canvasSize ||
        snakeY < 0 ||
        snakeY >= canvasSize ||
        collisionCheck(newHead, snake)
      ) {
        clearInterval(game);
        document.getElementById("gameOverMessage").style.display = "block";
        return;
      }
      snake.unshift(newHead);
      if (snakeX === food.x && snakeY === food.y) {
        score++;
        updateScore();
        food = {
          x: Math.floor(Math.random() * (canvasSize / box)) * box,
          y: Math.floor(Math.random() * (canvasSize / box)) * box,
        };
      } else {
        snake.pop();
      }
    }

    // Função para atualizar a direção da cobra
    function changeDirection(event) {
      if (
        event.keyCode === 37 &&
        direction !== "right" &&
        direction !== "left"
      ) {
        direction = "left";
      } else if (
        event.keyCode === 38 &&
        direction !== "down" &&
        direction !== "up"
      ) {
        direction = "up";
      } else if (
        event.keyCode === 39 &&
        direction !== "left" &&
        direction !== "right"
      ) {
        direction = "right";
      } else if (
        event.keyCode === 40 &&
        direction !== "up" &&
        direction !== "down"
      ) {
        direction = "down";
      } else if (event.keyCode === 13) { // Verificar se a tecla pressionada é Enter
        restartGame(); // Chamar a função para reiniciar o jogo
      }
    }

    // Iniciar o jogo
    function startGame() {
      game = setInterval(draw, 200);
    }

    // Adicionar evento de clique no botão de reiniciar
    document.getElementById("gameOverButton").addEventListener("click", function () {
      restartGame();
    });

    // Adicionar evento de escuta para as teclas de direção
    document.addEventListener("keydown", changeDirection);

    // Iniciar o jogo
    startGame();
  </script>
</body>
</html>
